<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Business Solutions — Analytics Dashboard</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: 'class' }</script>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />


  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <style>
  :root {
    --accent: #8e0a64;
  }

  .logo {
    font-weight: 700;
    letter-spacing: 0.4px;
  }

  .glass {
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(6px);
  }

  .dark .glass {
    background: rgba(0, 0, 0, 0.45);
  }

  .avatar {
    width: 44px;
    height: 44px;
    border-radius: 9999px;
    object-fit: cover;
  }

  .card {
    background: white;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: transform .35s cubic-bezier(.2, .9, .3, 1), box-shadow .35s;
  }
  .dark .card {
    background: #1e293b;
  }

  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 18px 40px rgba(14, 21, 47, 0.25);
  }

  .scrollbar-thin::-webkit-scrollbar {
    height: 8px;
    width: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 999px;
  }

  html, body {
    height: 100%;
    overflow: hidden;
  }

  .main-container {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }



  .sidebar-logo {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
    margin-left: -80px;
  }

  .sidebar-logo img {
    width: 160px;
    height: auto;
  }


aside#sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  overflow-y: auto;
  width: 18rem;
  z-index: 50;
  transition: transform 0.3s ease-in-out;
}

main {
  margin-left: 18rem;
  flex: 1;
  height: 100vh;
  overflow-y: auto;
  padding: 1.5rem 2rem;
  width: calc(100% - 18rem);
  transition: margin-left 0.3s ease-in-out, width 0.3s ease-in-out;
}


@media (max-width: 600px) {
  html, body {
    overflow-x: hidden;          /* prevent horizontal scrolling */
    max-width: 100vw;
  }

  aside#sidebar {
    transform: translateX(-100%);
    width: 13.5rem;              /* reduced width from 18rem → 13.5rem */
    background: white;
    margin-top: 80px;            /* adjust for header height */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.25);
    position: fixed;
    height: calc(100vh - 80px);
    overflow-y: auto;
    transition: transform 0.3s ease-in-out;
    z-index: 50;
  }

  .dark aside#sidebar {
    background: #1e293b;
  }

  aside#sidebar.open {
    transform: translateX(0);
  }

  main {
    margin-left: 0 !important;
    width: 100% !important;
    padding: 1rem;
    position: relative;
    z-index: 1;
  }

  /* Dim background when sidebar open */
  body.sidebar-open::before {
    content: "";
    position: fixed;
    inset: 0;
    top: 80px;
    background: rgba(0, 0, 0, 0.45);
    backdrop-filter: blur(3px);
    z-index: 40;
  }

  /* Sidebar links compact */
  aside#sidebar nav a {
    padding: 0.6rem 0.8rem;
    font-size: 0.85rem;
  }

  /* Prevent overflow for cards, tables, and images */
  img, table, .card, .p-4, .rounded-lg {
    max-width: 100%;
    overflow: hidden;
  }

  /* Compact header layout */
  header .flex {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  * {
    box-sizing: border-box;
  }

    .sidebar-logo {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
    margin-left: -70px;
  }
}

</style>

</head>
<body class="antialiased bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-100">

<div class="main-container">

  <aside id="sidebar" class="bg-white dark:bg-slate-800 border-r dark:border-slate-700 p-5">

    <div class="sidebar-logo">
      <img src="images/logo.png" alt="Business Solutions Logo" class="w-40 h-auto">
    </div>


    <nav class="space-y-1">
      <a href="dashboard.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-house"></i><span>Dashboard</span>
      </a>
      <a href="analytics.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-chart-line"></i><span>Analytics</span>
      </a>
      <a href="statistics.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-briefcase"></i><span>Statistics</span>
      </a>
      <a href="projects.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-diagram-project"></i><span>Projects</span>
      </a>
      <a href="transaction.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-exchange-alt"></i><span>Transactions</span>
      </a>
      <a href="inbox.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-inbox"></i><span>Inbox</span>
      </a>

      <a href="employees.html" class="flex items-center gap-3 p-2 rounded-md bg-[var(--accent)] text-white transition">
        <i class="fa-solid fa-user-group"></i><span>Employees</span>
      </a>

      <a href="users.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-users"></i><span>Users</span>
      </a>
    </nav>


    <div class="mt-6 border-t pt-4 text-xs text-slate-500 dark:text-slate-300">
      <div class="flex items-center justify-between">
        <div>Theme</div>
        <button id="themeToggle" title="Toggle dark mode" class="p-2 rounded-md bg-slate-100 dark:bg-slate-700">
          <i id="themeIcon" class="fa-solid fa-moon"></i>
        </button>
      </div>
    </div>
  </aside>


  <main class="p-6">

      <header class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <button id="mobileMenuBtn" class="md:hidden p-2 rounded-md glass"><i class="fa-solid fa-bars"></i></button>
          <a href="index.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-md bg-[var(--accent)] text-white hover:opacity-95"><i class="fa-solid fa-house"></i> Home</a>
          <h1 class="text-xl font-semibold ml-3">Employees Overview</h1>
        </div>

        <div class="flex items-center gap-4">
          <div class="relative flex items-center gap-2">

            <div class="relative">
              <button id="topNotifBtn" class="p-2 rounded-full glass"><i class="fa-solid fa-bell"></i></button>
              <div id="topNotifBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</div>
              <div id="topNotifDropdown" class="hidden absolute right-0 mt-3 w-80 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-md shadow-lg p-3 z-50">
                <div class="flex items-center justify-between mb-2"><strong>Notifications</strong><button id="clearTopNotifs" class="text-xs text-slate-500">Clear</button></div>
                <div id="topNotifList" class="space-y-2 max-h-48 overflow-auto scrollbar-thin"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-3">
            <div class="text-sm text-slate-500 dark:text-slate-300">Admin</div>
            <img src="https://i.pravatar.cc/150?img=47" alt="Admin" class="avatar ring-2 ring-white dark:ring-slate-900" />
          </div>
        </div>
      </header>


<section class="p-6 bg-white dark:bg-slate-800 rounded-lg shadow-lg mt-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-lg font-semibold text-slate-800 dark:text-white">Employees & Attendance</h2>
    <button id="addEmployeeBtn" class="bg-[#8e0a64] hover:bg-[#a61b7e] text-white px-4 py-2 rounded-lg">
      + Add Employee
    </button>
  </div>

  <!-- Employee Table -->
  <div class="overflow-x-auto">
    <table class="min-w-full border border-gray-200 dark:border-gray-700 text-sm">
      <thead class="bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-gray-200">
        <tr>
          <th class="p-3 text-left">ID</th>
          <th class="p-3 text-left">Name</th>
          <th class="p-3 text-left">Email</th>
          <th class="p-3 text-left">Department</th>
          <th class="p-3 text-left">Attendance</th>
          <th class="p-3 text-left">Actions</th>
        </tr>
      </thead>
      <tbody id="employeeTableBody" class="text-gray-700 dark:text-gray-300"></tbody>
    </table>
  </div>
</section>

<!-- Charts -->
<div class="grid md:grid-cols-2 gap-6 mt-6">
  <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg">
    <h3 class="text-lg font-semibold text-[#8e0a64] mb-4">Attendance Overview</h3>
    <canvas id="attendanceChart" height="200"></canvas>
  </div>

  <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg">
    <h3 class="text-lg font-semibold text-[#8e0a64] mb-4">Department Wise</h3>
    <canvas id="deptChart" height="200"></canvas>
  </div>
</div>

<!-- Add/Edit Employee Modal -->
<div id="employeeModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white dark:bg-slate-800 p-6 rounded-lg w-96 shadow-lg">
    <h3 id="modalTitle" class="text-lg font-semibold mb-4 text-[#8e0a64]">Add New Employee</h3>
    <form id="employeeForm" class="space-y-4">
      <input type="hidden" id="empId" />
      <input type="text" id="empName" placeholder="Full Name" class="w-full border border-gray-300 dark:border-gray-600 p-2 rounded" required />
      <input type="email" id="empEmail" placeholder="Email" class="w-full border border-gray-300 dark:border-gray-600 p-2 rounded" required />
      <input type="text" id="empDept" placeholder="Department" class="w-full border border-gray-300 dark:border-gray-600 p-2 rounded" required />
      <div class="flex justify-end space-x-3">
        <button type="button" id="cancelBtn" class="px-3 py-2 bg-gray-300 dark:bg-slate-700 rounded text-gray-800 dark:text-gray-200">Cancel</button>
        <button type="submit" class="px-3 py-2 bg-[#8e0a64] hover:bg-[#a61b7e] text-white rounded">Save</button>
      </div>
    </form>
  </div>
</div>

<footer class="mt-10 text-center text-sm text-slate-500">© <span id="yr"></span> Stackly</footer>

<script>
  const sidebar = document.getElementById('sidebar');
  const toggleBtn = document.getElementById('toggleSidebar');

  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('open');
    document.body.classList.toggle('sidebar-open');
    toggleBtn.textContent = sidebar.classList.contains('open') ? '⬅' : '➤';
  });

  document.getElementById('themeToggle').addEventListener('click', () => {
  document.documentElement.classList.toggle('dark');
  const icon = document.getElementById('themeIcon');
  icon.classList.toggle('fa-moon');
  icon.classList.toggle('fa-sun');
});
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const employees = [
  { id: 1, name: "John Doe", email: "john@example.com", dept: "Finance", present: true },
  { id: 2, name: "Priya Sharma", email: "priya@example.com", dept: "HR", present: false },
  { id: 3, name: "Rahul Kumar", email: "rahul@example.com", dept: "IT", present: true },
];

const tableBody = document.getElementById("employeeTableBody");
const addEmployeeBtn = document.getElementById("addEmployeeBtn");
const employeeModal = document.getElementById("employeeModal");
const cancelBtn = document.getElementById("cancelBtn");
const employeeForm = document.getElementById("employeeForm");
const modalTitle = document.getElementById("modalTitle");
let editingId = null;

// Render Employee Table
function renderEmployees() {
  tableBody.innerHTML = "";
  employees.forEach((emp) => {
    const row = document.createElement("tr");
    row.className = "border-b border-gray-200 dark:border-gray-700";
    row.innerHTML = `
      <td class="p-3">${emp.id}</td>
      <td class="p-3">${emp.name}</td>
      <td class="p-3">${emp.email}</td>
      <td class="p-3">${emp.dept}</td>
      <td class="p-3">
        <button onclick="toggleAttendance(${emp.id})"
          class="px-3 py-1 rounded-full text-white ${emp.present ? 'bg-green-500 hover:bg-green-600' : 'bg-red-500 hover:bg-red-600'}">
          ${emp.present ? 'Present' : 'Absent'}
        </button>
      </td>
      <td class="p-3 space-x-3">
        <button onclick="editEmployee(${emp.id})" class="text-blue-500 hover:text-blue-700">Edit</button>
        <button onclick="deleteEmployee(${emp.id})" class="text-red-500 hover:text-red-700">Delete</button>
      </td>
    `;
    tableBody.appendChild(row);
  });
  updateCharts();
}

// Toggle Attendance
function toggleAttendance(id) {
  const emp = employees.find(e => e.id === id);
  if (emp) {
    emp.present = !emp.present;
    renderEmployees();
  }
}

// Delete Employee
function deleteEmployee(id) {
  const index = employees.findIndex((e) => e.id === id);
  if (index !== -1) {
    employees.splice(index, 1);
    renderEmployees();
  }
}

// Edit Employee
function editEmployee(id) {
  const emp = employees.find(e => e.id === id);
  if (emp) {
    editingId = id;
    document.getElementById("empId").value = emp.id;
    document.getElementById("empName").value = emp.name;
    document.getElementById("empEmail").value = emp.email;
    document.getElementById("empDept").value = emp.dept;
    modalTitle.textContent = "Edit Employee";
    employeeModal.classList.remove("hidden");
  }
}

// Modal open/close
addEmployeeBtn.addEventListener("click", () => {
  editingId = null;
  modalTitle.textContent = "Add New Employee";
  employeeForm.reset();
  employeeModal.classList.remove("hidden");
});
cancelBtn.addEventListener("click", () => {
  employeeModal.classList.add("hidden");
  employeeForm.reset();
});

// Add or Edit Employee
employeeForm.addEventListener("submit", (e) => {
  e.preventDefault();
  const name = document.getElementById("empName").value;
  const email = document.getElementById("empEmail").value;
  const dept = document.getElementById("empDept").value;

  if (editingId) {
    const emp = employees.find(e => e.id === editingId);
    if (emp) {
      emp.name = name;
      emp.email = email;
      emp.dept = dept;
    }
  } else {
    const id = employees.length ? employees[employees.length - 1].id + 1 : 1;
    employees.push({ id, name, email, dept, present: false });
  }
  renderEmployees();
  employeeModal.classList.add("hidden");
  employeeForm.reset();
});

// Charts
let attendanceChart, deptChart;

function updateCharts() {
  const presentCount = employees.filter(e => e.present).length;
  const absentCount = employees.length - presentCount;

  const deptCount = {};
  employees.forEach(e => {
    deptCount[e.dept] = (deptCount[e.dept] || 0) + 1;
  });

  const deptLabels = Object.keys(deptCount);
  const deptData = Object.values(deptCount);

  if (attendanceChart) attendanceChart.destroy();
  if (deptChart) deptChart.destroy();

  const ctx1 = document.getElementById("attendanceChart").getContext("2d");
  attendanceChart = new Chart(ctx1, {
    type: "doughnut",
    data: {
      labels: ["Present", "Absent"],
      datasets: [{
        data: [presentCount, absentCount],
        backgroundColor: ["#16a34a", "#dc2626"],
      }],
    },
  });

  const ctx2 = document.getElementById("deptChart").getContext("2d");
  deptChart = new Chart(ctx2, {
    type: "bar",
    data: {
      labels: deptLabels,
      datasets: [{
        label: "Employees",
        data: deptData,
        backgroundColor: "#8e0a64",
      }],
    },
    options: {
      scales: { y: { beginAtZero: true } },
    },
  });
}

renderEmployees();
</script>



<script>


const state = {
      notifs: [
        {id:1,title:'Server CPU at 92%',time:'Now'},
        {id:2,title:'New contract signed: Acme Corp',time:'1d'},
        {id:3,title:'Invoice #INV-209 overdue',time:'2d'}
      ]
}

  document.getElementById('yr').textContent = new Date().getFullYear();


  document.getElementById('mobileMenuBtn').addEventListener('click', () => {
    document.getElementById('sidebar').classList.toggle('open');
  });


  const accent = '#8e0a64';


    function setTheme(dark){
      const themeIcon = document.getElementById('themeIcon');
      if(dark){document.documentElement.classList.add('dark'); themeIcon.className='fa-solid fa-sun'} else {document.documentElement.classList.remove('dark'); themeIcon.className='fa-solid fa-moon'}
      localStorage.setItem('bs_theme', dark? 'dark':'light');
    }
    document.getElementById('themeToggle').addEventListener('click', ()=> setTheme(!document.documentElement.classList.contains('dark')));
    if(localStorage.getItem('bs_theme') === 'dark') setTheme(true);


    document.getElementById('topNotifBtn').addEventListener('click', ()=> document.getElementById('topNotifDropdown').classList.toggle('hidden'));
    document.getElementById('clearTopNotifs').addEventListener('click', ()=>{ state.notifs = []; renderTopNotifs(); document.getElementById('topNotifDropdown').classList.add('hidden'); });


function renderTopNotifs() {
  const list = document.getElementById('topNotifList');
  const badge = document.getElementById('topNotifBadge');

  list.innerHTML = '';

  if (state.notifs.length === 0) {
    list.innerHTML = `<p class="text-sm text-slate-500 text-center py-2">No new notifications</p>`;
    badge.classList.add('hidden');
    return;
  }

  badge.textContent = state.notifs.length;
  badge.classList.remove('hidden');

  state.notifs.forEach(n => {
    const item = document.createElement('div');
    item.className = 'flex items-center justify-between py-1 text-sm';
    item.innerHTML = `
      <span>${n.title}</span>
      <span class="text-xs text-slate-400">${n.time}</span>
    `;
    list.appendChild(item);
  });
}

function removeNotif(id) {
  state.notifs = state.notifs.filter(n => n.id !== id);
  renderTopNotifs();
}

renderTopNotifs();

</script>
</body>
</html>
