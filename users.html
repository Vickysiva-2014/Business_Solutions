<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Business Solutions — Analytics Dashboard</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: 'class' }</script>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />


  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <style>
  :root {
    --accent: #8e0a64;
  }

  .logo {
    font-weight: 700;
    letter-spacing: 0.4px;
  }

  .glass {
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(6px);
  }

  .dark .glass {
    background: rgba(0, 0, 0, 0.45);
  }

  .avatar {
    width: 44px;
    height: 44px;
    border-radius: 9999px;
    object-fit: cover;
  }

  .card {
    background: white;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: transform .35s cubic-bezier(.2, .9, .3, 1), box-shadow .35s;
  }
  .dark .card {
    background: #1e293b;
  }

  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 18px 40px rgba(14, 21, 47, 0.25);
  }

  .scrollbar-thin::-webkit-scrollbar {
    height: 8px;
    width: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 999px;
  }

  html, body {
    height: 100%;
    overflow: hidden;
  }

  .main-container {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }



  .sidebar-logo {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
    margin-left: -80px;
  }

  .sidebar-logo img {
    width: 160px;
    height: auto;
  }


aside#sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  overflow-y: auto;
  width: 18rem;
  z-index: 50;
  transition: transform 0.3s ease-in-out;
}

main {
  margin-left: 18rem;
  flex: 1;
  height: 100vh;
  overflow-y: auto;
  padding: 1.5rem 2rem;
  width: calc(100% - 18rem);
  transition: margin-left 0.3s ease-in-out, width 0.3s ease-in-out;
}


@media (max-width: 600px) {
  html, body {
    overflow-x: hidden;          /* prevent horizontal scrolling */
    max-width: 100vw;
  }

  aside#sidebar {
    transform: translateX(-100%);
    width: 13.5rem;              /* reduced width from 18rem → 13.5rem */
    background: white;
    margin-top: 80px;            /* adjust for header height */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.25);
    position: fixed;
    height: calc(100vh - 80px);
    overflow-y: auto;
    transition: transform 0.3s ease-in-out;
    z-index: 50;
  }

  .dark aside#sidebar {
    background: #1e293b;
  }

  aside#sidebar.open {
    transform: translateX(0);
  }

  main {
    margin-left: 0 !important;
    width: 100% !important;
    padding: 1rem;
    position: relative;
    z-index: 1;
  }

  /* Dim background when sidebar open */
  body.sidebar-open::before {
    content: "";
    position: fixed;
    inset: 0;
    top: 80px;
    background: rgba(0, 0, 0, 0.45);
    backdrop-filter: blur(3px);
    z-index: 40;
  }

  /* Sidebar links compact */
  aside#sidebar nav a {
    padding: 0.6rem 0.8rem;
    font-size: 0.85rem;
  }

  /* Prevent overflow for cards, tables, and images */
  img, table, .card, .p-4, .rounded-lg {
    max-width: 100%;
    overflow: hidden;
  }

  /* Compact header layout */
  header .flex {
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  * {
    box-sizing: border-box;
  }

    .sidebar-logo {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
    margin-left: -70px;
  }
}

</style>

</head>
<body class="antialiased bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-100">

<div class="main-container">

  <aside id="sidebar" class="bg-white dark:bg-slate-800 border-r dark:border-slate-700 p-5">

    <div class="sidebar-logo">
      <img src="images/logo.png" alt="Business Solutions Logo" class="w-40 h-auto">
    </div>


        <nav class="space-y-1">
      <a href="dashboard.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-house"></i><span>Dashboard</span>
      </a>
      <a href="analytics.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-chart-line"></i><span>Analytics</span>
      </a>
      <a href="statistics.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-briefcase"></i><span>Statistics</span>
      </a>
      <a href="projects.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-diagram-project"></i><span>Projects</span>
      </a>
      <a href="transaction.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-exchange-alt"></i><span>Transactions</span>
      </a>
      <a href="inbox.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-inbox"></i><span>Inbox</span>
      </a>

      <a href="employees.html" class="flex items-center gap-3 p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition">
        <i class="fa-solid fa-user-group"></i><span>Employees</span>
      </a>

      <a href="users.html" class="flex items-center gap-3 p-2 rounded-md bg-[var(--accent)] text-white transition">
        <i class="fa-solid fa-users"></i><span>Users</span>
      </a>
    </nav>


    <div class="mt-6 border-t pt-4 text-xs text-slate-500 dark:text-slate-300">
      <div class="flex items-center justify-between">
        <div>Theme</div>
        <button id="themeToggle" title="Toggle dark mode" class="p-2 rounded-md bg-slate-100 dark:bg-slate-700">
          <i id="themeIcon" class="fa-solid fa-moon"></i>
        </button>
      </div>
    </div>
  </aside>


  <main class="p-6">

      <header class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <button id="mobileMenuBtn" class="md:hidden p-2 rounded-md glass"><i class="fa-solid fa-bars"></i></button>
          <a href="index.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-md bg-[var(--accent)] text-white hover:opacity-95"><i class="fa-solid fa-house"></i> Home</a>
          <h1 class="text-xl font-semibold ml-3">Users Overview</h1>
        </div>

        <div class="flex items-center gap-4">
          <div class="relative flex items-center gap-2">

            <div class="relative">
              <button id="topNotifBtn" class="p-2 rounded-full glass"><i class="fa-solid fa-bell"></i></button>
              <div id="topNotifBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</div>
              <div id="topNotifDropdown" class="hidden absolute right-0 mt-3 w-80 bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-md shadow-lg p-3 z-50">
                <div class="flex items-center justify-between mb-2"><strong>Notifications</strong><button id="clearTopNotifs" class="text-xs text-slate-500">Clear</button></div>
                <div id="topNotifList" class="space-y-2 max-h-48 overflow-auto scrollbar-thin"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-3">
            <div class="text-sm text-slate-500 dark:text-slate-300">Admin</div>
            <img src="https://i.pravatar.cc/150?img=47" alt="Admin" class="avatar ring-2 ring-white dark:ring-slate-900" />
          </div>
        </div>
      </header>


<section class="card mb-8">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold">Manage Users</h2>
    <button onclick="openModal()" class="bg-[var(--accent)] text-white px-4 py-2 rounded-md hover:bg-[#a01b73]">
      <i class="fa-solid fa-user-plus mr-2"></i> Add User
    </button>
  </div>

  <div class="overflow-x-auto">
    <table class="w-full text-sm">
      <thead class="border-b text-slate-600 dark:text-slate-300">
        <tr>
          <th class="py-3 px-4 text-left">Name</th>
          <th class="py-3 px-4 text-left">Email</th>
          <th class="py-3 px-4 text-left">Company Name</th>
          <th class="py-3 px-4 text-left">Role</th>
          <th class="py-3 px-4 text-left">Status</th>
          <th class="py-3 px-4 text-left">Rating</th>
          <th class="py-3 px-4 text-center">Action</th>
        </tr>
      </thead>
      <tbody id="userTableBody">
        <tr class="border-b">
          <td class="py-3 px-4">John Doe</td>
          <td class="py-3 px-4">john@example.com</td>
          <td class="py-3 px-4">Armcon</td>
          <td class="py-3 px-4">Admin</td>
          <td class="py-3 px-4"><span class="text-green-600 font-medium">Active</span></td>
          <td class="py-3 px-4">4.5</td>
          <td class="py-3 px-4 text-center">
            <button class="text-blue-600 hover:underline mr-2" onclick="editUser(this)">Edit</button>
            <button class="text-red-600 hover:underline" onclick="deleteUser(this)">Delete</button>
          </td>
        </tr>
        <tr>
          <td class="py-3 px-4">Jane Smith</td>
          <td class="py-3 px-4">jane@example.com</td>
          <td class="py-3 px-4">Winfield</td>
          <td class="py-3 px-4">Manager</td>
          <td class="py-3 px-4"><span class="text-yellow-600 font-medium">Inactive</span></td>
          <td class="py-3 px-4">3.8</td>
          <td class="py-3 px-4 text-center">
            <button class="text-blue-600 hover:underline mr-2" onclick="editUser(this)">Edit</button>
            <button class="text-red-600 hover:underline" onclick="deleteUser(this)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- Charts Section -->
<div class="grid md:grid-cols-2 gap-6 mt-8">
  <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg">
    <h3 class="text-lg font-semibold text-[#8e0a64] mb-4">Active vs Inactive Users</h3>
    <canvas id="statusChart" height="200"></canvas>
  </div>

  <div class="bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg">
    <h3 class="text-lg font-semibold text-[#8e0a64] mb-4">User Ratings</h3>
    <canvas id="ratingChart" height="200"></canvas>
  </div>
</div>

<!-- Add/Edit Modal -->
<div id="userModal" class="fixed inset-0 hidden bg-black/50 flex items-center justify-center z-50">
  <div class="bg-white dark:bg-slate-800 rounded-xl w-96 p-6 shadow-lg">
    <h2 id="modalTitle" class="text-xl font-semibold mb-4">Add User</h2>
    <form id="userForm" class="space-y-3">
      <input type="text" id="name" placeholder="Full Name" class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-[var(--accent)] outline-none" required>
      <input type="email" id="email" placeholder="Email" class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-[var(--accent)] outline-none" required>
      <input type="text" id="companyname" placeholder="Company Name" class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-[var(--accent)] outline-none" required>
      <input type="text" id="role" placeholder="Role" class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-[var(--accent)] outline-none" required>
      <select id="status" class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-[var(--accent)] outline-none">
        <option value="Active">Active</option>
        <option value="Inactive">Inactive</option>
      </select>
      <input type="number" id="rating" placeholder="Rating (1-5)" min="1" max="5" step="0.1" class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-[var(--accent)] outline-none" required>
      <div class="flex justify-end gap-2 mt-4">
        <button type="button" onclick="closeModal()" class="px-4 py-2 rounded-md bg-slate-200 dark:bg-slate-700">Cancel</button>
        <button type="submit" class="px-4 py-2 rounded-md bg-[var(--accent)] text-white">Save</button>
      </div>
    </form>
  </div>
</div>

<footer class="mt-10 text-center text-sm text-slate-500">© <span id="yr"></span> Business Solutions</footer>

<script>
  const sidebar = document.getElementById('sidebar');
  const toggleBtn = document.getElementById('toggleSidebar');

  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('open');
    document.body.classList.toggle('sidebar-open');
    toggleBtn.textContent = sidebar.classList.contains('open') ? '⬅' : '➤';
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const modal = document.getElementById('userModal');
const form = document.getElementById('userForm');
const title = document.getElementById('modalTitle');
let editRow = null;

function openModal() {
  modal.classList.remove('hidden');
  title.textContent = "Add User";
  form.reset();
  editRow = null;
}

function closeModal() {
  modal.classList.add('hidden');
}

form.addEventListener('submit', (e) => {
  e.preventDefault();

  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const companyname = document.getElementById('companyname').value;
  const role = document.getElementById('role').value;
  const status = document.getElementById('status').value;
  const rating = document.getElementById('rating').value;

  if (editRow) {
    editRow.cells[0].textContent = name;
    editRow.cells[1].textContent = email;
    editRow.cells[2].textContent = companyname;
    editRow.cells[3].textContent = role;
    editRow.cells[4].innerHTML = `<span class="font-medium ${status === 'Active' ? 'text-green-600' : 'text-yellow-600'}">${status}</span>`;
    editRow.cells[5].textContent = rating;
  } else {
    const tbody = document.getElementById('userTableBody');
    const row = tbody.insertRow();
    row.innerHTML = `
      <td class="py-3 px-4">${name}</td>
      <td class="py-3 px-4">${email}</td>
      <td class="py-3 px-4">${companyname}</td>
      <td class="py-3 px-4">${role}</td>
      <td class="py-3 px-4"><span class="font-medium ${status === 'Active' ? 'text-green-600' : 'text-yellow-600'}">${status}</span></td>
      <td class="py-3 px-4">${rating}</td>
      <td class="py-3 px-4 text-center">
        <button class="text-blue-600 hover:underline mr-2" onclick="editUser(this)">Edit</button>
        <button class="text-red-600 hover:underline" onclick="deleteUser(this)">Delete</button>
      </td>`;
  }

  updateCharts();
  closeModal();
});

function editUser(button) {
  editRow = button.closest('tr');
  const cells = editRow.cells;
  document.getElementById('name').value = cells[0].textContent;
  document.getElementById('email').value = cells[1].textContent;
  document.getElementById('companyname').value = cells[2].textContent;
  document.getElementById('role').value = cells[3].textContent;
  document.getElementById('status').value = cells[4].textContent.trim();
  document.getElementById('rating').value = cells[5].textContent;
  title.textContent = "Edit User";
  modal.classList.remove('hidden');
}

function deleteUser(button) {
  button.closest('tr').remove();
  updateCharts();
}

// Chart.js Logic
let statusChart, ratingChart;

function updateCharts() {
  const rows = document.querySelectorAll("#userTableBody tr");
  let activeCount = 0, inactiveCount = 0;
  const ratings = [];

  rows.forEach(row => {
    const status = row.cells[4].innerText.trim();
    const rating = parseFloat(row.cells[5].innerText);
    if (status === "Active") activeCount++;
    else inactiveCount++;
    ratings.push(rating);
  });

  if (statusChart) statusChart.destroy();
  if (ratingChart) ratingChart.destroy();

  const ctx1 = document.getElementById("statusChart").getContext("2d");
  statusChart = new Chart(ctx1, {
    type: "doughnut",
    data: {
      labels: ["Active", "Inactive"],
      datasets: [{
        data: [activeCount, inactiveCount],
        backgroundColor: ["#16a34a", "#dc2626"],
      }],
    },
  });

  const ctx2 = document.getElementById("ratingChart").getContext("2d");
  ratingChart = new Chart(ctx2, {
    type: "bar",
    data: {
      labels: ratings.map((_, i) => "User " + (i + 1)),
      datasets: [{
        label: "Rating",
        data: ratings,
        backgroundColor: "#8e0a64",
      }],
    },
    options: {
      scales: { y: { beginAtZero: true, max: 5 } },
    },
  });
}

updateCharts();
</script>



<script>


const state = {
      notifs: [
        {id:1,title:'Server CPU at 92%',time:'Now'},
        {id:2,title:'New contract signed: Acme Corp',time:'1d'},
        {id:3,title:'Invoice #INV-209 overdue',time:'2d'}
      ]
}

  document.getElementById('yr').textContent = new Date().getFullYear();


  document.getElementById('mobileMenuBtn').addEventListener('click', () => {
    document.getElementById('sidebar').classList.toggle('open');
  });


  const accent = '#8e0a64';


    function setTheme(dark){
      const themeIcon = document.getElementById('themeIcon');
      if(dark){document.documentElement.classList.add('dark'); themeIcon.className='fa-solid fa-sun'} else {document.documentElement.classList.remove('dark'); themeIcon.className='fa-solid fa-moon'}
      localStorage.setItem('bs_theme', dark? 'dark':'light');
    }
    document.getElementById('themeToggle').addEventListener('click', ()=> setTheme(!document.documentElement.classList.contains('dark')));
    if(localStorage.getItem('bs_theme') === 'dark') setTheme(true);


    document.getElementById('topNotifBtn').addEventListener('click', ()=> document.getElementById('topNotifDropdown').classList.toggle('hidden'));
    document.getElementById('clearTopNotifs').addEventListener('click', ()=>{ state.notifs = []; renderTopNotifs(); document.getElementById('topNotifDropdown').classList.add('hidden'); });


function renderTopNotifs() {
  const list = document.getElementById('topNotifList');
  const badge = document.getElementById('topNotifBadge');

  list.innerHTML = '';

  if (state.notifs.length === 0) {
    list.innerHTML = `<p class="text-sm text-slate-500 text-center py-2">No new notifications</p>`;
    badge.classList.add('hidden');
    return;
  }

  badge.textContent = state.notifs.length;
  badge.classList.remove('hidden');

  state.notifs.forEach(n => {
    const item = document.createElement('div');
    item.className = 'flex items-center justify-between py-1 text-sm';
    item.innerHTML = `
      <span>${n.title}</span>
      <span class="text-xs text-slate-400">${n.time}</span>
    `;
    list.appendChild(item);
  });
}

function removeNotif(id) {
  state.notifs = state.notifs.filter(n => n.id !== id);
  renderTopNotifs();
}

renderTopNotifs();

</script>
</body>
</html>
